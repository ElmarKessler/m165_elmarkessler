## A
### Bild Konzeptionelles Datenmodell
![](/KN02/BildDrawioNew.PNG)
### Erklärung zum Datenmodell
Mein Datenmodell hat 5 Entitäten: Mitglied, Buch, Treffen, Rezension, Leseliste
Zu einer Leseliste gehören ein odere mehrere Bücher. Ein Buch hat kann ausserdem mehrere Rezensionen besitzen. Mehrere Bücher können von mehreren Mitglieder gelesen werden. Ein Mitglied kann ausserdem mehrere Rezensionen schreiben, jedoch nur eine Rezension pro Buch. Mehrere Mitglieder versammeln sich immer an einem Treffen. Bei einem oder mehreren Treffen wird maximal über ein Buch gesprochen.

## B
### Logisches Datenmodell
![](/KN02/DrawioMitVerschachtelung.PNG)
### Erklärung zum Datenmodell
Ich habe das logische Modell so verschachtelt, weil Rezensionen eng mit den jeweiligen Büchern verknüpft sind und somit direkt im Buch gespeichert werden sollten. Dadurch kann ich beim Abrufen eines Buches sofort alle zugehörigen Rezensionen sehen, was den Datenzugriff vereinfacht. Außerdem hilft die Verschachtelung, die Datenkonsistenz zu gewährleisten und das Datenmodell klar und verständlich zu halten.

## C
![](/KN02/KN02C.PNG)

### Skript zur Erstellung der Collections + Validation
use BuchClubDB;

const bookSchema = {
  $jsonSchema: {
    bsonType: "object",
    required: ["author", "pages"],
    properties: {
      author: {
        bsonType: "string",
        description: "must be a string and is required"
      },
      pages: {
        bsonType: "int",
        minimum: 1,
        description: "must be an integer greater than 0 and is required"
      }
    }
  }
};

const memberSchema = {
  $jsonSchema: {
    bsonType: "object",
    required: ["name", "gender", "age"],
    properties: {
      name: {
        bsonType: "string",
        description: "must be a string and is required"
      },
      gender: {
        bsonType: "string",
        description: "must be a string and is required"
      },
      age: {
        bsonType: "int",
        minimum: 18,
        description: "must be an integer greater than or equal to 18 and is required"
      }
    }
  }
};

const reviewSchema = {
  $jsonSchema: {
    bsonType: "object",
    required: ["rating", "positives", "negatives"],
    properties: {
      rating: {
        bsonType: "int",
        minimum: 1,
        maximum: 5,
        description: "must be an integer between 1 and 5 and is required"
      },
      positives: {
        bsonType: "string",
        description: "must be a string and is required"
      },
      negatives: {
        bsonType: "string",
        description: "must be a string and is required"
      }
    }
  }
};

const readinglistSchema = {
  $jsonSchema: {
    bsonType: "object",
    required: ["bookcount", "recentBook"],
    properties: {
      bookcount: {
        bsonType: "int",
        minimum: 0,
        description: "must be an integer greater than or equal to 0 and is required"
      },
      recentBook: {
        bsonType: "string",
        description: "must be a string and is required"
      }
    }
  }
};

db.createCollection("book", { validator: bookSchema });
db.createCollection("member", { validator: memberSchema });
db.createCollection("review", { validator: reviewSchema });
db.createCollection("readinglist", { validator: readinglistSchema });

